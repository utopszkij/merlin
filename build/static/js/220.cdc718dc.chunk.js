"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[220,448],{220:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var r=a(43),t=a(85),l=a(448),c=a(613),n=a.n(c),i=a(579);const o=()=>{const[e,s]=(0,r.useState)(""),[a,c]=(0,r.useState)(""),[o,d]=(0,r.useState)("login"),[h,m]=(0,r.useState)(""),p=t.sh.lng,x=t.sh.getCookie("sid");(0,r.useEffect)((()=>{n()("#waiting").hide()}));const j=e=>{t.sh.setCookie("logedId",e.data.id,10),t.sh.setCookie("logedNick",e.data.nick,10),t.sh.setCookie("logedAvatar",e.data.avatar,10),t.sh.setCookie("logedGroups",e.data.groups,10);let s=t.sh.getCookie("redirect");""!==s&&void 0!==s||(s="./home"),t.sh.gotoNewPage(s)};return(0,i.jsxs)(i.Fragment,{children:["regist"===o&&(0,i.jsx)(l.default,{}),"two_factor"===o&&(0,i.jsxs)("div",{id:"twoFactor",className:"form",children:[(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsxs)("h1",{children:[(0,i.jsx)("em",{className:"fas fa-sign-in-alt"}),"\xa0",(0,i.jsx)("span",{children:p("LOGIN")})]})}),(0,i.jsxs)("form",{name:"login",action:"index.php",method:"post",id:"formLogin",children:[(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("em",{className:"fas fa-user"}),"\xa0",(0,i.jsx)("label",{children:p("TWO_FACTOR_KEY")}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"text",name:"key",id:"key",onChange:e=>m(e.target.value),autoFocus:!0,required:!0})]})}),(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("button",{type:"button",className:"btn btn-success",name:"submit",id:"doLogin",onClick:()=>{t.sh.callApi("api/dotwofactorkey",{sid:x,key:h},(e=>{e.data.loged?j(e):t.sh.popupMsg(p(e.data.errorMsg),t.Nf.error)}))},children:[(0,i.jsx)("em",{className:"fas fa-check"}),"\xa0",p("OK")]})})})]})]}),"login"==o&&(0,i.jsxs)("div",{id:"login",className:"form",children:[(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsxs)("h1",{children:[(0,i.jsx)("em",{className:"fas fa-sign-in-alt"}),"\xa0",(0,i.jsx)("span",{children:p("LOGIN")})]})}),(0,i.jsxs)("form",{name:"login",action:"index.php",method:"post",id:"formLogin",children:[(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("em",{className:"fas fa-user"}),"\xa0",(0,i.jsx)("label",{children:p("NICKNAME_OR_EMAIL")}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"text",name:"email",id:"email",value:e,onChange:e=>s(e.target.value),autoFocus:!0,required:!0})]})}),(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("em",{className:"fas fa-key"}),"\xa0",(0,i.jsx)("label",{children:p("PASSWORD")}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"password",id:"password",name:"password",value:a,onChange:e=>c(e.target.value),required:!0})]})}),(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("a",{href:"./poliicy",target:"_new",children:p("ACCEPT1")}),"\xa0",p("ACCEPT2")]})}),(0,i.jsx)("div",{className:"row text-center",children:(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("button",{type:"button",className:"btn btn-success",name:"submit",id:"doLogin",onClick:()=>{t.sh.setCookie("logedId","",10),t.sh.setCookie("logedNick","",10),t.sh.setCookie("logedAvatar","",10),t.sh.setCookie("logedGroups","",10),""===e?t.sh.popupMsg(p("NICK_OR_EMAIL_REQUIRED"),t.Nf.error):""===a?t.sh.popupMsg(p("PASSWORD_REQUIRED")+"/"+a+"/",t.Nf.error):t.sh.callApi("api/dologin.php",{sid:x,email:e,password:a},(e=>{e.data.loged?j(e):"TWO_FACTOR"==e.data.errorMsg?d("two_factor"):t.sh.popupMsg(p(e.data.errorMsg),t.Nf.error)}))},children:[(0,i.jsx)("em",{className:"fas fa-check"}),"\xa0",p("OK")]})})}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"row text-center",children:[(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("a",{className:"btn btn-secondary",href:"https://netpolgar.hu/auth/facebook?state=SITEURL/redirect",children:p("FBLOGIN")})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("a",{href:"'https://netpolgar.hu/auth/google?state='+SITEURL+'/'+atob(redirect)",className:"btn btn-secondary",children:p("GOOGLELOGIN")})})]})]}),(0,i.jsx)("div",{className:"alert alert-info",children:p("REGISTHELP2")}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-12 text-center",children:(0,i.jsx)("button",{type:"button",id:"doRegister",onClick:()=>{d("regist")},className:"btn btn-secondary",children:p("DOREGIST")})})}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-12 text-center",children:(0,i.jsx)("var",{className:"btn btn-secondary",id:"resendEmail",onClick:()=>{""===e?t.sh.popupMsg(p("NICK_OR_EMAIL_REQUIRED"),t.Nf.error):t.sh.callApi("api/sendactivatoremail.php",{sid:x,email:e},(e=>{e.data.mailsended?t.sh.popupMsg(p("EMAIL_SENDED"),t.Nf.success):t.sh.popupMsg(p("WRONG_DATA"),t.Nf.error)}))},children:p("RESEND_ACTIVATOR")})})}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-12 text-center",children:(0,i.jsx)("var",{className:"btn btn-secondary",id:"forgetPassword",onClick:()=>{""===e?t.sh.popupMsg(p("NICK_OR_EMAIL_REQUIRED"),t.Nf.error):t.sh.callApi("api/forgetpassword.php",{sid:x,email:e},(e=>{e.data.mailsended?t.sh.popupMsg(p("EMAIL_SENDED"),t.Nf.success):t.sh.popupMsg(p("WRONG_DATA"),t.Nf.error)}))},children:p("FORGET_PASSWORD")})})})]})]})}},448:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var r=a(43),t=a(85),l=a(579);const c=()=>{const e=t.sh.lng,[s,a]=(0,r.useState)(""),[c,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[x,j]=(0,r.useState)(""),[N,u]=(0,r.useState)("0"),[g,v]=(0,r.useState)("0");return(0,l.jsx)("div",{id:"Register",children:(0,l.jsxs)("div",{id:"regist",className:"form",children:[(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("h1",{className:"ribbon-banner",children:[(0,l.jsx)("em",{className:"fa fa-user-plus","aria-hidden":"true"}),"\xa0",(0,l.jsx)("span",{children:e("REGISTRATION")})]})}),(0,l.jsxs)("form",{name:"registration",id:"registForm",method:"post",encType:"multipart/form-data",children:[(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("em",{className:"fa fa-user"}),e("USERNAME"),"\xa0"]}),(0,l.jsx)("input",{type:"text",name:"username",id:"username",onChange:e=>a(e.target.value),required:!0,className:"form-control"})]})}),(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("em",{className:"fa fa-key"}),e("PASSWORD"),"\xa0"]}),(0,l.jsx)("input",{type:"password",name:"password",id:"password",required:!0,className:"form-control password",minLength:8,onChange:e=>n(e.target.value)})]})}),(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("em",{className:"fa fa-key"}),e("PASSWORD_RETYPE")]}),(0,l.jsx)("input",{type:"password",name:"password2",className:"form-control password",onChange:e=>o(e.target.value)})]})}),(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("em",{className:"fas fa-id-badge"}),e("REALNAME"),"\xa0"]}),(0,l.jsx)("input",{type:"text",name:"realname",required:!0,className:"form-control",onChange:e=>h(e.target.value)})]})}),(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("em",{className:"fas fa-envelope"}),e("EMAIL"),"\xa0"]}),(0,l.jsx)("input",{type:"email",name:"email",required:!0,className:"form-control",onChange:e=>p(e.target.value)})]})}),(0,l.jsxs)("div",{className:"row text-center",children:[(0,l.jsx)("div",{className:"col-12",children:e("AVATARFILE")}),(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("em",{className:"fas fa-camera"}),"\xa0"]}),(0,l.jsx)("input",{type:"file",name:"avatar",id:"avatar",className:"form-control",onChange:e=>j(e.target.value)})]})]}),(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("label",{children:[e("TWOFACTOR"),"\xa0"]}),(0,l.jsxs)("select",{name:"twofactor",className:"form-control",onChange:e=>u(e.target.value),children:[(0,l.jsx)("option",{value:"0",children:e("YES")}),(0,l.jsx)("option",{value:"1",children:e("NO")})]})]})}),(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsx)("label",{children:"\xa0"}),(0,l.jsx)("input",{type:"checkbox",className:"form-check-input",name:"accept",value:"1",onChange:e=>v(e.target.value)}),(0,l.jsx)("strong",{children:e("POLICYACCEPT")}),(0,l.jsx)("br",{}),";",(0,l.jsxs)("a",{href:"./policy",target:"_new",children:[(0,l.jsx)("em",{className:"fas fa-hand-point-right"}),e("POLICY")]})]})}),(0,l.jsx)("div",{className:"row text-center",children:(0,l.jsx)("div",{className:"col-12",children:(0,l.jsxs)("button",{type:"button",className:"btn btn-primary",name:"submitbtn",onClick:()=>{console.log("validator start"),console.log(document),console.log(document.getElementById("avatar"));var a=0,r=0,l=0,n=0;a=c.match(/[a-z\xf6\xfc\xf3\u0151\xfa\xe9\xe1\u0171\xed]/g)?1:0;n=c.match(/[A-Z\xd6\xdc\xd3\u0150\xda\xc9\xc1\u0170\xcd]/g)?1:0;r=c.match(/[0-9]/g)?1:0,l=c.match(/[\\xa7'"+!%/=()\\|\xc4\xf7\xd7\xe4\u0111\u0110\[\]\u0142\u0141$\xdf\xa4<>#&@{},;\?\.:\-_\*\\]/g)?1:0,console.log("validator",c,a,n,r,l),"0"===g?t.sh.popupMsg(e("ACCEPT_REQUIRED")):c!==i?t.sh.popupMsg(e("TWO_PASSWORD_NOT_EQUALS")):0===a||0===n||0===r||0===l?t.sh.popupMsg(e("PASSWORD_INVALID")):t.sh.callApi("api/registcheck",{sid:t.sh.data("sid"),username:s,email:m,userid:"0"},(a=>{if(a.ok){let a=new FormData;a.append("sid",t.sh.data("sid")),a.append("username",s),a.append("email",m),a.append("userid","0"),a.append("realname",d),a.append("password",c),a.append("twofactor",N),a.append("accept",g);let r=document.getElementById("avatar"),l=null===r||void 0===r?void 0:r.files;l&&l.length>0&&a.append("avatar",l[0]),t.sh.callApi("api/doregist.php",a,(s=>{s.ok?t.sh.popupMsg(e("ACTIVATOR_EMAIL_SENDED")):t.sh.popupMsg(s.errorMsg)}))}else t.sh.popupMsg(e(a.errorMsg))}))},children:[(0,l.jsx)("em",{className:"fas fa-check"}),"\xa0",e("OK")]})})})]}),(0,l.jsx)("div",{className:"alert alert-warning",children:(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:e("REGISTHELP")})})}),(0,l.jsx)("div",{className:"alert alert-info",children:e("REGISTHELP2")})]})})}}}]);
//# sourceMappingURL=220.cdc718dc.chunk.js.map